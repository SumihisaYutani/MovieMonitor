<Window x:Class="MovieMonitor.Views.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:models="clr-namespace:MovieMonitor.Models"
        Title="è¨­å®š" Height="650" Width="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Background="{StaticResource BackgroundBrush}">

    <Window.Resources>
        <Style x:Key="GroupHeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource PrimaryBrush}"/>
            <Setter Property="Margin" Value="0,16,0,8"/>
        </Style>

        <Style x:Key="LabelTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Foreground" Value="{StaticResource OnSurfaceBrush}"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="0,0,8,0"/>
        </Style>

        <Style x:Key="SettingsTextBoxStyle" TargetType="TextBox" BasedOn="{StaticResource {x:Type TextBox}}">
            <Setter Property="Margin" Value="0,4"/>
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Height" Value="32"/>
        </Style>

        <Style x:Key="SettingsButtonStyle" TargetType="Button" BasedOn="{StaticResource {x:Type Button}}">
            <Setter Property="Margin" Value="4,0"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="MinWidth" Value="80"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" Margin="24">
            <StackPanel>
                
                <!-- ã‚¹ã‚­ãƒ£ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­å®š -->
                <TextBlock Text="ðŸ“ ã‚¹ã‚­ãƒ£ãƒ³å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€" Style="{StaticResource GroupHeaderTextStyle}"/>
                <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                        Effect="{StaticResource ElevationShadow1}">
                    <StackPanel>
                        <DockPanel Margin="0,0,0,8">
                            <Button DockPanel.Dock="Right" Content="è¿½åŠ " 
                                    Command="{Binding AddDirectoryCommand}"
                                    Style="{StaticResource SettingsButtonStyle}"/>
                            <TextBlock Text="å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¹ã‚­ãƒ£ãƒ³ã™ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚" 
                                       Style="{StaticResource LabelTextStyle}"/>
                        </DockPanel>
                        
                        <ListBox ItemsSource="{Binding ScanDirectories}" 
                                 Height="120" Background="Transparent" BorderThickness="1"
                                 BorderBrush="{StaticResource OnSurfaceLightBrush}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Grid.Column="0" Text="{Binding}" VerticalAlignment="Center"
                                                   Margin="4"/>
                                        <Button Grid.Column="1" Content="å‰Šé™¤" 
                                                Command="{Binding DataContext.RemoveDirectoryCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                CommandParameter="{Binding}"
                                                Style="{StaticResource SettingsButtonStyle}"
                                                Background="{StaticResource ErrorBrush}"
                                                Foreground="White"
                                                FontSize="10" MinWidth="50" Height="24"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Border>

                <!-- FFmpegè¨­å®š -->
                <TextBlock Text="ðŸŽ¬ FFmpegè¨­å®š" Style="{StaticResource GroupHeaderTextStyle}"/>
                <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                        Effect="{StaticResource ElevationShadow1}">
                    <StackPanel>
                        <TextBlock Text="FFmpegã®binãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹:" Style="{StaticResource LabelTextStyle}"/>
                        <DockPanel>
                            <Button DockPanel.Dock="Right" Content="å‚ç…§" 
                                    Command="{Binding BrowseFFmpegCommand}"
                                    Style="{StaticResource SettingsButtonStyle}"/>
                            <TextBox Text="{Binding FFmpegPath, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource SettingsTextBoxStyle}"/>
                        </DockPanel>
                        <TextBlock Text="â€» ã‚µãƒ ãƒã‚¤ãƒ«ç”Ÿæˆã«å¿…è¦ã§ã™ã€‚é€šå¸¸ã¯ C:\ffmpeg\bin ã‚’æŒ‡å®šã—ã¾ã™ã€‚"
                                   FontSize="10" Foreground="{StaticResource OnSurfaceMediumBrush}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- å¤–è¦³è¨­å®š -->
                <TextBlock Text="ðŸŽ¨ å¤–è¦³è¨­å®š" Style="{StaticResource GroupHeaderTextStyle}"/>
                <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                        Effect="{StaticResource ElevationShadow1}">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Grid.Column="0" Text="ãƒ†ãƒ¼ãƒž:" Style="{StaticResource LabelTextStyle}" Width="120"/>
                            <ComboBox Grid.Row="0" Grid.Column="1" SelectedItem="{Binding Theme}" Margin="0,4">
                                <ComboBox.ItemsSource>
                                    <x:Array Type="models:AppTheme">
                                        <models:AppTheme>Light</models:AppTheme>
                                        <models:AppTheme>Dark</models:AppTheme>
                                    </x:Array>
                                </ComboBox.ItemsSource>
                            </ComboBox>

                            <TextBlock Grid.Row="1" Grid.Column="0" Text="ã‚µãƒ ãƒã‚¤ãƒ«ã‚µã‚¤ã‚º:" Style="{StaticResource LabelTextStyle}"/>
                            <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="0,4">
                                <Slider Value="{Binding ThumbnailSize}" Minimum="100" Maximum="600" Width="150"
                                        VerticalAlignment="Center" TickFrequency="50" IsSnapToTickEnabled="True"/>
                                <TextBlock Text="{Binding ThumbnailSize, StringFormat={}{0}px}" 
                                           VerticalAlignment="Center" Margin="8,0,0,0"
                                           Style="{StaticResource LabelTextStyle}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- å‹•ç”»å†ç”Ÿè¨­å®š -->
                <TextBlock Text="â–¶ï¸ å‹•ç”»å†ç”Ÿè¨­å®š" Style="{StaticResource GroupHeaderTextStyle}"/>
                <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                        Effect="{StaticResource ElevationShadow1}">
                    <StackPanel>
                        <TextBlock Text="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹•ç”»ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼:" Style="{StaticResource LabelTextStyle}"/>
                        <DockPanel>
                            <Button DockPanel.Dock="Right" Content="å‚ç…§" 
                                    Command="{Binding BrowsePlayerCommand}"
                                    Style="{StaticResource SettingsButtonStyle}"/>
                            <TextBox Text="{Binding DefaultPlayer, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource SettingsTextBoxStyle}"/>
                        </DockPanel>
                        <TextBlock Text="â€» ç©ºã®å ´åˆã¯ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§é–‹ãã¾ã™ã€‚"
                                   FontSize="10" Foreground="{StaticResource OnSurfaceMediumBrush}" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³è¨­å®š -->
                <TextBlock Text="ðŸ”„ è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³è¨­å®š" Style="{StaticResource GroupHeaderTextStyle}"/>
                <Border Background="{StaticResource SurfaceBrush}" CornerRadius="8" Padding="16" Margin="0,0,0,16"
                        Effect="{StaticResource ElevationShadow1}">
                    <StackPanel>
                        <CheckBox IsChecked="{Binding AutoScan}" Content="è‡ªå‹•ã‚¹ã‚­ãƒ£ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹" 
                                  Margin="0,0,0,8" FontSize="12"/>
                        
                        <Grid IsEnabled="{Binding AutoScan}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            
                            <TextBlock Grid.Column="0" Text="ã‚¹ã‚­ãƒ£ãƒ³é–“éš”:" Style="{StaticResource LabelTextStyle}" Width="80"/>
                            <Slider Grid.Column="1" Value="{Binding AutoScanInterval}" 
                                    Minimum="5" Maximum="180" Width="150"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="2" Text="{Binding AutoScanInterval, StringFormat={}{0}åˆ†}" 
                                       VerticalAlignment="Center" Margin="8,0,0,0"
                                       Style="{StaticResource LabelTextStyle}"/>
                        </Grid>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>

        <!-- ãƒœã‚¿ãƒ³ -->
        <Border Grid.Row="1" Background="{StaticResource SurfaceBrush}" 
                BorderBrush="{StaticResource OnSurfaceLightBrush}" BorderThickness="0,1,0,0"
                Padding="24,16">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Content="ã‚­ãƒ£ãƒ³ã‚»ãƒ«" Command="{Binding CancelCommand}" 
                        Style="{StaticResource SettingsButtonStyle}" Margin="0,0,8,0"/>
                <Button Content="ä¿å­˜" Command="{Binding SaveCommand}"
                        Background="{StaticResource PrimaryBrush}" 
                        Foreground="White"
                        Style="{StaticResource SettingsButtonStyle}"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>